<!DOCTYPE html>  <html> <head>   <title>event-router.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="animation-loop.html">                 animation-loop.coffee               </a>                                           <a class="source" href="autocode.html">                 autocode.coffee               </a>                                           <a class="source" href="lexer.html">                 lexer.coffee               </a>                                           <a class="source" href="background-painter.html">                 background-painter.coffee               </a>                                           <a class="source" href="big-cursor.html">                 big-cursor.coffee               </a>                                           <a class="source" href="blend-controls.html">                 blend-controls.coffee               </a>                                           <a class="source" href="code-transformer.html">                 code-transformer.coffee               </a>                                           <a class="source" href="colour-functions.html">                 colour-functions.coffee               </a>                                           <a class="source" href="colour-literals.html">                 colour-literals.coffee               </a>                                           <a class="source" href="editor.html">                 editor.coffee               </a>                                           <a class="source" href="event-router.html">                 event-router.coffee               </a>                                           <a class="source" href="globals.html">                 globals.coffee               </a>                                           <a class="source" href="graphics-commands.html">                 graphics-commands.coffee               </a>                                           <a class="source" href="init.html">                 init.coffee               </a>                                           <a class="source" href="lights-commands.html">                 lights-commands.coffee               </a>                                           <a class="source" href="livecodelab-core.html">                 livecodelab-core.coffee               </a>                                           <a class="source" href="math.html">                 math.coffee               </a>                                           <a class="source" href="matrix-commands.html">                 matrix-commands.coffee               </a>                                           <a class="source" href="parser.html">                 parser.coffee               </a>                                           <a class="source" href="program-loader.html">                 program-loader.coffee               </a>                                           <a class="source" href="program-runner.html">                 program-runner.coffee               </a>                                           <a class="source" href="renderer.html">                 renderer.coffee               </a>                                           <a class="source" href="samplebank.html">                 samplebank.coffee               </a>                                           <a class="source" href="sound-system.html">                 sound-system.coffee               </a>                                           <a class="source" href="text-dimming.html">                 text-dimming.coffee               </a>                                           <a class="source" href="threejs-system.html">                 threejs-system.coffee               </a>                                           <a class="source" href="time-keeper.html">                 time-keeper.coffee               </a>                                           <a class="source" href="ui.html">                 ui.coffee               </a>                                           <a class="source" href="url-router.html">                 url-router.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               event-router.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>#</h1>             </td>             <td class="code">               <div class="highlight"><pre>EventRouter bridges most events in LiveCodeLab. Error message pops up? Event router
steps in. Big cursor needs to shrink? It's the event router who stepped in. You get the
picture. Any part of LiveCodeLab can just register callbacks and trigger events, using
some descriptive strings as keys. Handy because it's a hub where one could attach
debugging and listing of all registered callbacks. Probably not a good idea to attach
rapid-fire events due to overheads.
</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h1>#</h1>             </td>             <td class="code">               <div class="highlight"><pre>
<span class="class"><span class="keyword">class</span> <span class="title">EventRouter</span></span>
  <span class="string">"use strict"</span>

  events: {}
  
  constructor: -&gt;
  
  bind: (name, callback, context) -&gt;
</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>console.log("binding: " + name + " to callback: " +
  callback + " with context: " + context);</p>             </td>             <td class="code">               <div class="highlight"><pre>    listenerInfo =
      callback: callback
      context: context

    <span class="property">@events</span>[name] = []  <span class="keyword">unless</span> <span class="property">@events</span>[name]
    <span class="property">@events</span>[name].push listenerInfo

  trigger: (name) -&gt;
    args = <span class="literal">undefined</span>
    callbacks = <span class="literal">undefined</span>
    i = <span class="literal">undefined</span>
    listenerInfo = <span class="literal">undefined</span>
    
</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>console.log("triggered: " + name);
convert the arguments object into an array</p>             </td>             <td class="code">               <div class="highlight"><pre>    args = Array::slice.call(arguments)
    <span class="keyword">if</span> <span class="property">@events</span>[name]
      args = args.slice(<span class="number">1</span>)
      callbacks = <span class="property">@events</span>[name]
      <span class="keyword">for</span> listenerInfo <span class="keyword">in</span> callbacks
        listenerInfo.callback.apply listenerInfo.context, args

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 