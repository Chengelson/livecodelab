<!DOCTYPE html>  <html> <head>   <title>colour-functions.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="animation-loop.html">                 animation-loop.coffee               </a>                                           <a class="source" href="autocoder.html">                 autocoder.coffee               </a>                                           <a class="source" href="lexer.html">                 lexer.coffee               </a>                                           <a class="source" href="background-painter.html">                 background-painter.coffee               </a>                                           <a class="source" href="big-cursor.html">                 big-cursor.coffee               </a>                                           <a class="source" href="blend-controls.html">                 blend-controls.coffee               </a>                                           <a class="source" href="code-transformer.html">                 code-transformer.coffee               </a>                                           <a class="source" href="colour-functions.html">                 colour-functions.coffee               </a>                                           <a class="source" href="colour-literals.html">                 colour-literals.coffee               </a>                                           <a class="source" href="editor.html">                 editor.coffee               </a>                                           <a class="source" href="event-router.html">                 event-router.coffee               </a>                                           <a class="source" href="globals.html">                 globals.coffee               </a>                                           <a class="source" href="graphics-commands.html">                 graphics-commands.coffee               </a>                                           <a class="source" href="init.html">                 init.coffee               </a>                                           <a class="source" href="lights-commands.html">                 lights-commands.coffee               </a>                                           <a class="source" href="livecodelab-core.html">                 livecodelab-core.coffee               </a>                                           <a class="source" href="math.html">                 math.coffee               </a>                                           <a class="source" href="matrix-commands.html">                 matrix-commands.coffee               </a>                                           <a class="source" href="parser.html">                 parser.coffee               </a>                                           <a class="source" href="program-loader.html">                 program-loader.coffee               </a>                                           <a class="source" href="program-runner.html">                 program-runner.coffee               </a>                                           <a class="source" href="renderer.html">                 renderer.coffee               </a>                                           <a class="source" href="samplebank.html">                 samplebank.coffee               </a>                                           <a class="source" href="sound-system.html">                 sound-system.coffee               </a>                                           <a class="source" href="text-dimming.html">                 text-dimming.coffee               </a>                                           <a class="source" href="threejs-system.html">                 threejs-system.coffee               </a>                                           <a class="source" href="time-keeper.html">                 time-keeper.coffee               </a>                                           <a class="source" href="ui.html">                 ui.coffee               </a>                                           <a class="source" href="url-router.html">                 url-router.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               colour-functions.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>jslint browser: true, bitwise: true </p>             </td>             <td class="code">               <div class="highlight"><pre>
</pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>global max, min </p>             </td>             <td class="code">               <div class="highlight"><pre>
</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Code adapted from processing.js</p>             </td>             <td class="code">               <div class="highlight"><pre>

</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Closure compiler automatically replaces symbolic Constants.* names with their
values (it does it for everything it thinks it's a constant really).</p>             </td>             <td class="code">               <div class="highlight"><pre>

<span class="class"><span class="keyword">class</span> <span class="title">ColourFunctions</span></span>
  <span class="string">"use strict"</span>

  constructor: -&gt;
    window.<span class="function"><span class="title">color</span></span> = (a,b,c,d) =&gt; <span class="property">@color</span>(a,b,c,d)
    window.<span class="function"><span class="title">colorToHSB</span></span> = (a) =&gt; <span class="property">@colorToHSB</span>(a)
    window.<span class="function"><span class="title">brightness</span></span> = (a) =&gt; <span class="property">@brightness</span>(a)
    window.<span class="function"><span class="title">saturation</span></span> = (a) =&gt; <span class="property">@saturation</span>(a)
    window.<span class="function"><span class="title">hue</span></span> = (a) =&gt; <span class="property">@hue</span>(a)
    window.<span class="function"><span class="title">redF</span></span> = (a) =&gt; <span class="property">@redF</span>(a)
    window.<span class="function"><span class="title">greenF</span></span> = (a) =&gt; <span class="property">@greenF</span>(a)
    window.<span class="function"><span class="title">blueF</span></span> = (a) =&gt; <span class="property">@blueF</span>(a)
    window.<span class="function"><span class="title">alpha</span></span> = (a) =&gt; <span class="property">@alpha</span>(a)
    window.<span class="function"><span class="title">alphaZeroToOne</span></span> = (a) =&gt; <span class="property">@alphaZeroToOne</span>(a)
    window.<span class="function"><span class="title">lerp</span></span> = (a,b,c) =&gt; <span class="property">@lerp</span>(a,b,c)
    window.<span class="function"><span class="title">lerpColor</span></span> = (a,b,c) =&gt; <span class="property">@lerpColor</span>(a,b,c)
    window.<span class="function"><span class="title">colorMode</span></span> = (a,b,c,d,e) =&gt; <span class="property">@colorMode</span>(a,b,c,d,e)
    window.<span class="function"><span class="title">blendColor</span></span> = (a,b,c) =&gt; <span class="property">@blendColor</span>(a,b,c)

    <span class="property">@colorModeX</span> = <span class="number">255</span>
    <span class="property">@colorModeY</span> = <span class="number">255</span>
    <span class="property">@colorModeZ</span> = <span class="number">255</span>
    <span class="property">@colorModeA</span> = <span class="number">255</span>
    <span class="property">@Constants</span> =      
</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Color modes</p>             </td>             <td class="code">               <div class="highlight"><pre>      RGB: <span class="number">1</span>
      ARGB: <span class="number">2</span>
      HSB: <span class="number">3</span>
      ALPHA: <span class="number">4</span>
      CMYK: <span class="number">5</span>
      
</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Blend modes</p>             </td>             <td class="code">               <div class="highlight"><pre>      REPLACE: <span class="number">0</span>
      BLEND: <span class="number">1</span> &lt;&lt; <span class="number">0</span>
      ADD: <span class="number">1</span> &lt;&lt; <span class="number">1</span>
      SUBTRACT: <span class="number">1</span> &lt;&lt; <span class="number">2</span>
      LIGHTEST: <span class="number">1</span> &lt;&lt; <span class="number">3</span>
      DARKEST: <span class="number">1</span> &lt;&lt; <span class="number">4</span>
      DIFFERENCE: <span class="number">1</span> &lt;&lt; <span class="number">5</span>
      EXCLUSION: <span class="number">1</span> &lt;&lt; <span class="number">6</span>
      MULTIPLY: <span class="number">1</span> &lt;&lt; <span class="number">7</span>
      SCREEN: <span class="number">1</span> &lt;&lt; <span class="number">8</span>
      OVERLAY: <span class="number">1</span> &lt;&lt; <span class="number">9</span>
      HARD_LIGHT: <span class="number">1</span> &lt;&lt; <span class="number">10</span>
      SOFT_LIGHT: <span class="number">1</span> &lt;&lt; <span class="number">11</span>
      DODGE: <span class="number">1</span> &lt;&lt; <span class="number">12</span>
      BURN: <span class="number">1</span> &lt;&lt; <span class="number">13</span>
      
</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Color component bit masks</p>             </td>             <td class="code">               <div class="highlight"><pre>      ALPHA_MASK: <span class="number">0xff000000</span>
      RED_MASK: <span class="number">0x00ff0000</span>
      GREEN_MASK: <span class="number">0x0000ff00</span>
      BLUE_MASK: <span class="number">0x000000ff</span>
    
    window.HSB = <span class="property">@Constants</span>.HSB
    window.RGB = <span class="property">@Constants</span>.RGB

    <span class="property">@curColorMode</span> = <span class="property">@Constants</span>.RGB

</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Ease of use function to extract the colour bits into a string</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color</span>.<span class="function"><span class="title">toString</span></span> = (colorInt) =&gt;
      <span class="string">"rgba("</span> + ((colorInt &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>) + <span class="string">","</span> + ((colorInt &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>) + <span class="string">","</span> + (colorInt &amp; <span class="property">@Constants</span>.BLUE_MASK) + <span class="string">","</span> + ((colorInt &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="number">255</span> + <span class="string">")"</span>

</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Easy of use function to pack rgba values into a single bit-shifted color int.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color</span>.<span class="function"><span class="title">toInt</span></span> = (r, g, b, a) =&gt;
      (a &lt;&lt; <span class="number">24</span>) &amp; <span class="property">@Constants</span>.ALPHA_MASK | (r &lt;&lt; <span class="number">16</span>) &amp; <span class="property">@Constants</span>.RED_MASK | (g &lt;&lt; <span class="number">8</span>) &amp; <span class="property">@Constants</span>.GREEN_MASK | b &amp; <span class="property">@Constants</span>.BLUE_MASK
  
</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Creates a simple array in [R, G, B, A] format, [255, 255, 255, 255]</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color</span>.<span class="function"><span class="title">toArray</span></span> = (colorInt) =&gt;
      [(colorInt &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>, (colorInt &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>, colorInt &amp; <span class="property">@Constants</span>.BLUE_MASK, (colorInt &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>]
  
</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Creates a WebGL color array in [R, G, B, A] format. WebGL wants the color ranges between 0 and 1, [1, 1, 1, 1]</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color</span>.<span class="function"><span class="title">toGLArray</span></span>= (colorInt) =&gt;
      [((colorInt &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>) / <span class="number">255</span>, ((colorInt &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>) / <span class="number">255</span>, (colorInt &amp; <span class="property">@Constants</span>.BLUE_MASK) / <span class="number">255</span>, ((colorInt &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="number">255</span>]
  
</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>HSB conversion function from Mootools, MIT Licensed</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color</span>.<span class="function"><span class="title">toRGB</span></span> = (h, s, b) =&gt;
      br = <span class="literal">undefined</span>
      hue = <span class="literal">undefined</span>
      f = <span class="literal">undefined</span>
      p = <span class="literal">undefined</span>
      q = <span class="literal">undefined</span>
      t = <span class="literal">undefined</span>
      
</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Limit values greater than range</p>             </td>             <td class="code">               <div class="highlight"><pre>      h = (<span class="keyword">if</span> (h &gt; <span class="property">@colorModeX</span>) <span class="keyword">then</span> <span class="property">@colorModeX</span> <span class="keyword">else</span> h)
      s = (<span class="keyword">if</span> (s &gt; <span class="property">@colorModeY</span>) <span class="keyword">then</span> <span class="property">@colorModeY</span> <span class="keyword">else</span> s)
      b = (<span class="keyword">if</span> (b &gt; <span class="property">@colorModeZ</span>) <span class="keyword">then</span> <span class="property">@colorModeZ</span> <span class="keyword">else</span> b)
      h = (h / <span class="property">@colorModeX</span>) * <span class="number">360</span>
      s = (s / <span class="property">@colorModeY</span>) * <span class="number">100</span>
      b = (b / <span class="property">@colorModeZ</span>) * <span class="number">100</span>
      br = Math.round(b / <span class="number">100</span> * <span class="number">255</span>)
</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Grayscale</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="keyword">return</span> [br, br, br]  <span class="keyword">if</span> s <span class="keyword">is</span> <span class="number">0</span>
      hue = h % <span class="number">360</span>
      f = hue % <span class="number">60</span>
      p = Math.round((b * (<span class="number">100</span> - s)) / <span class="number">10000</span> * <span class="number">255</span>)
      q = Math.round((b * (<span class="number">6000</span> - s * f)) / <span class="number">600000</span> * <span class="number">255</span>)
      t = Math.round((b * (<span class="number">6000</span> - s * (<span class="number">60</span> - f))) / <span class="number">600000</span> * <span class="number">255</span>)
      <span class="keyword">switch</span> Math.floor(hue / <span class="number">60</span>)
        <span class="keyword">when</span> <span class="number">0</span>
          [br, t, p]
        <span class="keyword">when</span> <span class="number">1</span>
          [q, br, p]
        <span class="keyword">when</span> <span class="number">2</span>
          [p, br, t]
        <span class="keyword">when</span> <span class="number">3</span>
          [p, q, br]
        <span class="keyword">when</span> <span class="number">4</span>
          [t, p, br]
        <span class="keyword">when</span> <span class="number">5</span>
          [br, p, q]
    <span class="property">@modes</span> = <span class="property">@modesFunction</span>()

  color$<span class="number">4</span>: (aValue1, aValue2, aValue3, aValue4) -&gt;
    r = <span class="literal">undefined</span>
    g = <span class="literal">undefined</span>
    b = <span class="literal">undefined</span>
    a = <span class="literal">undefined</span>
    rgb = <span class="literal">undefined</span>
    <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.HSB
      rgb = <span class="property">@color</span>.toRGB(aValue1, aValue2, aValue3)
      r = rgb[<span class="number">0</span>]
      g = rgb[<span class="number">1</span>]
      b = rgb[<span class="number">2</span>]
    <span class="keyword">else</span>
      r = Math.round(<span class="number">255</span> * (aValue1 / <span class="property">@colorModeX</span>))
      g = Math.round(<span class="number">255</span> * (aValue2 / <span class="property">@colorModeY</span>))
      b = Math.round(<span class="number">255</span> * (aValue3 / <span class="property">@colorModeZ</span>))
    a = Math.round(<span class="number">255</span> * (aValue4 / <span class="property">@colorModeA</span>))
    
</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Limit values less than 0 and greater than 255</p>             </td>             <td class="code">               <div class="highlight"><pre>    r = (<span class="keyword">if</span> (r &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> r)
    g = (<span class="keyword">if</span> (g &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> g)
    b = (<span class="keyword">if</span> (b &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> b)
    a = (<span class="keyword">if</span> (a &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> a)
    r = (<span class="keyword">if</span> (r &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> r)
    g = (<span class="keyword">if</span> (g &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> g)
    b = (<span class="keyword">if</span> (b &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> b)
    a = (<span class="keyword">if</span> (a &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> a)
    
</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Create color int</p>             </td>             <td class="code">               <div class="highlight"><pre>    (a &lt;&lt; <span class="number">24</span>) &amp; <span class="property">@Constants</span>.ALPHA_MASK | (r &lt;&lt; <span class="number">16</span>) &amp; <span class="property">@Constants</span>.RED_MASK | (g &lt;&lt; <span class="number">8</span>) &amp; <span class="property">@Constants</span>.GREEN_MASK | b &amp; <span class="property">@Constants</span>.BLUE_MASK

  color$<span class="number">2</span>: (aValue1, aValue2) -&gt;
    a = <span class="literal">undefined</span>
    
</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>lowest than any 32 bit color is a special
color that paints based on normals.</p>             </td>             <td class="code">               <div class="highlight"><pre>    angleColor = -<span class="number">16777217</span>
    <span class="keyword">return</span> angleColor  <span class="keyword">if</span> aValue1 <span class="keyword">is</span> angleColor
    
</pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Color int and alpha</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">if</span> aValue1 &amp; <span class="property">@Constants</span>.ALPHA_MASK
      a = Math.round(<span class="number">255</span> * (aValue2 / <span class="property">@colorModeA</span>))
      
</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Limit values less than 0 and greater than 255</p>             </td>             <td class="code">               <div class="highlight"><pre>      a = (<span class="keyword">if</span> (a &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> a)
      a = (<span class="keyword">if</span> (a &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> a)
      <span class="keyword">return</span> aValue1 - (aValue1 &amp; <span class="property">@Constants</span>.ALPHA_MASK) + ((a &lt;&lt; <span class="number">24</span>) &amp; <span class="property">@Constants</span>.ALPHA_MASK)
    
</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Grayscale and alpha</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">return</span> <span class="property">@color$4</span>(aValue1, aValue1, aValue1, aValue2)  <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.RGB
    <span class="property">@color$4</span> <span class="number">0</span>, <span class="number">0</span>, (aValue1 / <span class="property">@colorModeX</span>) * <span class="property">@colorModeZ</span>, aValue2  <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.HSB

</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>so, color in both processing and processing.js is slightly weird, because
color is just a Java integer, which is a little bit of a headache to
fold into a Javascript number, which is a float and it's 64 bits.
For example, the color black is 0xFF000000, which
in unsigned integer (or 64 bits float) would be 4278190080.
OK, instead color(0) in Java return -16777216, because Java integers are signed in
two's complement and they go from -2147483648 to 2147483647 included</p>             </td>             <td class="code">               <div class="highlight"><pre>  color$<span class="number">1</span>: (aValue1) -&gt;
    
</pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>so that special colors still work with "color", e.g.
fill(color(angleColor))</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">if</span> (<span class="keyword">typeof</span> aValue1) == <span class="string">"string"</span>
      <span class="keyword">return</span> aValue1

</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Grayscale</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">if</span> aValue1 &lt;= <span class="property">@colorModeX</span> <span class="keyword">and</span> aValue1 &gt;= <span class="number">0</span>
      <span class="keyword">return</span> <span class="property">@color$4</span>(aValue1, aValue1, aValue1, <span class="property">@colorModeA</span>)  <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.RGB
      <span class="keyword">return</span> <span class="property">@color$4</span>(<span class="number">0</span>, <span class="number">0</span>, (aValue1 / <span class="property">@colorModeX</span>) * <span class="property">@colorModeZ</span>, <span class="property">@colorModeA</span>)  <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.HSB
    
</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Color int</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">if</span> aValue1      
</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Java Overflow
in two's complement, 2147483647 is 0xFFFFFFFF i.e. the very max of
java integer's 32 bits, so if you add one you go back to the java int minimum
so in java the following program gives -2147483648
   int a = 2147483647 + 1; // equivalent to int a = color(2147483647 + 1)
   println("a " + a); 
so we are emulating this here with this subtraction.
note that this stops being correct at 2147483647<em>3 + 3, i.e.
  int a = color(2147483647</em>3 + 3 ) ;
  println("a " + a);
in Java gives -2147483648
while this routine gives 2147483648</p>             </td>             <td class="code">               <div class="highlight"><pre>      aValue1 -= <span class="number">4294967296</span>  <span class="keyword">if</span> aValue1 &gt; <span class="number">2147483647</span>
</pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>note that folding below the lower bound is not handled, i.e. -2147483648 -1
doesn't fold to 2147483647</p>             </td>             <td class="code">               <div class="highlight"><pre>      aValue1

  
  
  Creates colors <span class="keyword">for</span> storing <span class="keyword">in</span> variables <span class="keyword">of</span> the color datatype. The parameters are
  interpreted as RGB <span class="keyword">or</span> HSB values depending <span class="literal">on</span> the current colorMode(). The <span class="reserved">default</span>
  mode <span class="keyword">is</span> RGB values from <span class="number">0</span> to <span class="number">255</span> <span class="keyword">and</span> therefore, the <span class="reserved">function</span> call color(<span class="number">255</span>, <span class="number">204</span>, <span class="number">0</span>)
  will <span class="keyword">return</span> a bright yellow color. More about how colors are stored can be found <span class="keyword">in</span>
  the reference <span class="keyword">for</span> the color datatype.
  
  <span class="property">@param</span> {int|float} aValue1        red <span class="keyword">or</span> hue <span class="keyword">or</span> grey values relative to the current color range.
  Also can be color value <span class="keyword">in</span> hexadecimal notation (i.e. <span class="comment">#FFCC00 or 0xFFFFCC00)</span>
  <span class="property">@param</span> {int|float} aValue2        green <span class="keyword">or</span> saturation values relative to the current color range
  <span class="property">@param</span> {int|float} aValue3        blue <span class="keyword">or</span> brightness values relative to the current color range
  <span class="property">@param</span> {int|float} aValue4        relative to current color range. Represents alpha
  
  <span class="property">@returns</span> {color} the color
  
  <span class="property">@see</span> colorMode
  
  color: (aValue1, aValue2, aValue3, aValue4) -&gt;
    
</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>4 arguments: (R, G, B, A) or (H, S, B, A)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">return</span> <span class="property">@color$4</span>(aValue1, aValue2, aValue3, aValue4)  <span class="keyword">if</span> aValue1 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue2 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue3 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue4 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>`
    
</pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>3 arguments: (R, G, B) or (H, S, B)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">return</span> <span class="property">@color$4</span>(aValue1, aValue2, aValue3, <span class="property">@colorModeA</span>)  <span class="keyword">if</span> aValue1 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue2 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue3 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>`
    
</pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>2 arguments: (Color, A) or (Grayscale, A)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">return</span> <span class="property">@color$2</span>(aValue1, aValue2)  <span class="keyword">if</span> aValue1 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>` <span class="keyword">and</span> aValue2 <span class="keyword">isnt</span> `<span class="javascript"><span class="literal">undefined</span></span>`
    
</pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>1 argument: (Grayscale) or (Color)
we also accept strings because special colors such as angleColor are encoded
through strings</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="keyword">if</span> <span class="keyword">typeof</span> aValue1 <span class="keyword">is</span> <span class="string">"number"</span> <span class="keyword">or</span> <span class="keyword">typeof</span> aValue1 <span class="keyword">is</span> <span class="string">"string"</span> 
      <span class="keyword">return</span> <span class="property">@color$1</span>(aValue1)
    
</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Default</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="property">@color$4</span> <span class="property">@colorModeX</span>, <span class="property">@colorModeY</span>, <span class="property">@colorModeZ</span>, <span class="property">@colorModeA</span>

  colorToHSB: (colorInt) -&gt;
    red = <span class="literal">undefined</span>
    green = <span class="literal">undefined</span>
    blue = <span class="literal">undefined</span>
    minBright = <span class="literal">undefined</span>
    maxBright = <span class="literal">undefined</span>
    hue = <span class="literal">undefined</span>
    saturation = <span class="literal">undefined</span>
    red = ((colorInt &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>) / <span class="number">255</span>
    green = ((colorInt &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>) / <span class="number">255</span>
    blue = (colorInt &amp; <span class="property">@Constants</span>.BLUE_MASK) / <span class="number">255</span>
    maxBright = max(max(red, green), blue)
    minBright = min(min(red, green), blue)
    <span class="keyword">return</span> [<span class="number">0</span>, <span class="number">0</span>, maxBright * <span class="property">@colorModeZ</span>]  <span class="keyword">if</span> minBright <span class="keyword">is</span> maxBright
    saturation = (maxBright - minBright) / maxBright
    <span class="keyword">if</span> red <span class="keyword">is</span> maxBright
      hue = (green - blue) / (maxBright - minBright)
    <span class="keyword">else</span> <span class="keyword">if</span> green <span class="keyword">is</span> maxBright
      hue = <span class="number">2</span> + ((blue - red) / (maxBright - minBright))
    <span class="keyword">else</span>
      hue = <span class="number">4</span> + ((red - green) / (maxBright - minBright))
    hue /= <span class="number">6</span>
    <span class="keyword">if</span> hue &lt; <span class="number">0</span>
      hue += <span class="number">1</span>
    <span class="keyword">else</span> hue -= <span class="number">1</span>  <span class="keyword">if</span> hue &gt; <span class="number">1</span>
    [hue * <span class="property">@colorModeX</span>, saturation * <span class="property">@colorModeY</span>, maxBright * <span class="property">@colorModeZ</span>]

  
  
  Extracts the brightness value from a color.
  
  <span class="property">@param</span> {color} colInt any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The brightness color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> green
  <span class="property">@see</span> blue
  <span class="property">@see</span> hue
  <span class="property">@see</span> saturation
  
  brightness: (colInt) -&gt;
    <span class="property">@colorToHSB</span>(colInt)[<span class="number">2</span>]

  
  
  Extracts the saturation value from a color.
  
  <span class="property">@param</span> {color} colInt any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The saturation color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> green
  <span class="property">@see</span> blue
  <span class="property">@see</span> hue
  <span class="property">@see</span> brightness
  
  saturation: (colInt) -&gt;
    <span class="property">@colorToHSB</span>(colInt)[<span class="number">1</span>]

  
  
  Extracts the hue value from a color.
  
  <span class="property">@param</span> {color} colInt any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The hue color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> green
  <span class="property">@see</span> blue
  <span class="property">@see</span> saturation
  <span class="property">@see</span> brightness
  
  hue: (colInt) -&gt;
    <span class="property">@colorToHSB</span>(colInt)[<span class="number">0</span>]

  
  
  Extracts the red value from a color, scaled to match current colorMode().
  This value <span class="keyword">is</span> always returned as a float so be careful <span class="keyword">not</span> to assign it to an int value.
  
  <span class="property">@param</span> {color} aColor any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The red color value.
  
  <span class="property">@see</span> green
  <span class="property">@see</span> blue
  <span class="property">@see</span> alpha
  <span class="property">@see</span> &gt;&gt; right shift
  <span class="property">@see</span> hue
  <span class="property">@see</span> saturation
  <span class="property">@see</span> brightness
  
  redF: (aColor) -&gt;
    ((aColor &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>) / <span class="number">255</span> * <span class="property">@colorModeX</span>

  
  
  Extracts the green value from a color, scaled to match current colorMode().
  This value <span class="keyword">is</span> always returned as a float so be careful <span class="keyword">not</span> to assign it to an int value.
  
  <span class="property">@param</span> {color} aColor any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The green color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> blue
  <span class="property">@see</span> alpha
  <span class="property">@see</span> &gt;&gt; right shift
  <span class="property">@see</span> hue
  <span class="property">@see</span> saturation
  <span class="property">@see</span> brightness
  
  greenF: (aColor) -&gt;
    ((aColor &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>) / <span class="number">255</span> * <span class="property">@colorModeY</span>

  
  
  Extracts the blue value from a color, scaled to match current colorMode().
  This value <span class="keyword">is</span> always returned as a float so be careful <span class="keyword">not</span> to assign it to an int value.
  
  <span class="property">@param</span> {color} aColor any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The blue color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> green
  <span class="property">@see</span> alpha
  <span class="property">@see</span> &gt;&gt; right shift
  <span class="property">@see</span> hue
  <span class="property">@see</span> saturation
  <span class="property">@see</span> brightness
  
  blueF: (aColor) -&gt;
    (aColor &amp; <span class="property">@Constants</span>.BLUE_MASK) / <span class="number">255</span> * <span class="property">@colorModeZ</span>

  
  
  Extracts the alpha value from a color, scaled to match current colorMode().
  This value <span class="keyword">is</span> always returned as a float so be careful <span class="keyword">not</span> to assign it to an int value.
  
  <span class="property">@param</span> {color} aColor any value <span class="keyword">of</span> the color datatype
  
  <span class="property">@returns</span> {float} The alpha color value.
  
  <span class="property">@see</span> red
  <span class="property">@see</span> green
  <span class="property">@see</span> blue
  <span class="property">@see</span> &gt;&gt; right shift
  <span class="property">@see</span> hue
  <span class="property">@see</span> saturation
  <span class="property">@see</span> brightness
  
  alpha: (aColor) -&gt;
    ((aColor &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="number">255</span> * <span class="property">@colorModeA</span>

  alphaZeroToOne: (aColor) -&gt;
    ((aColor &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="number">255</span>

  
  
  Calculates a number between two numbers at a specific increment. The amt  parameter <span class="keyword">is</span> the
  amount to interpolate between the two values where <span class="number">0.0</span> equal to the first point, <span class="number">0.1</span> <span class="keyword">is</span> very
  near the first point, <span class="number">0.5</span> <span class="keyword">is</span> half-way <span class="keyword">in</span> between, etc. The lerp <span class="reserved">function</span> <span class="keyword">is</span> convenient <span class="keyword">for</span>
  creating motion along a straight path <span class="keyword">and</span> <span class="keyword">for</span> drawing dotted lines.
  
  <span class="property">@param</span> {int|float} value1       float <span class="keyword">or</span> int: first value
  <span class="property">@param</span> {int|float} value2       float <span class="keyword">or</span> int: second value
  <span class="property">@param</span> {int|float} amt          float: between <span class="number">0.0</span> <span class="keyword">and</span> <span class="number">1.0</span>
  
  <span class="property">@returns</span> {float}
  
  <span class="property">@see</span> curvePoint
  <span class="property">@see</span> bezierPoint
  
  lerp: (value1, value2, amt) -&gt;
    ((value2 - value1) * amt) + value1

  
  
  Calculates a color <span class="keyword">or</span> colors between two colors at a specific increment.
  The amt parameter <span class="keyword">is</span> the amount to interpolate between the two values where <span class="number">0.0</span>
  equal to the first point, <span class="number">0.1</span> <span class="keyword">is</span> very near the first point, <span class="number">0.5</span> <span class="keyword">is</span> half-way <span class="keyword">in</span> between, etc.
  
  <span class="property">@param</span> {color} c1     interpolate from <span class="keyword">this</span> color
  <span class="property">@param</span> {color} c2     interpolate to <span class="keyword">this</span> color
  <span class="property">@param</span> {float} amt    between <span class="number">0.0</span> <span class="keyword">and</span> <span class="number">1.0</span>
  
  <span class="property">@returns</span> {float} The blended color.
  
  <span class="property">@see</span> blendColor
  <span class="property">@see</span> color
  
  lerpColor: (c1, c2, amt) -&gt;
    r = <span class="literal">undefined</span>
    g = <span class="literal">undefined</span>
    b = <span class="literal">undefined</span>
    a = <span class="literal">undefined</span>
    r1 = <span class="literal">undefined</span>
    g1 = <span class="literal">undefined</span>
    b1 = <span class="literal">undefined</span>
    a1 = <span class="literal">undefined</span>
    r2 = <span class="literal">undefined</span>
    g2 = <span class="literal">undefined</span>
    b2 = <span class="literal">undefined</span>
    a2 = <span class="literal">undefined</span>
    hsb1 = <span class="literal">undefined</span>
    hsb2 = <span class="literal">undefined</span>
    rgb = <span class="literal">undefined</span>
    h = <span class="literal">undefined</span>
    s = <span class="literal">undefined</span>
    colorBits1 = <span class="property">@color</span>(c1)
    colorBits2 = <span class="property">@color</span>(c2)
    <span class="keyword">if</span> <span class="property">@curColorMode</span> <span class="keyword">is</span> <span class="property">@Constants</span>.HSB
      
</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Special processing for HSB mode.
Get HSB and Alpha values for Color 1 and 2</p>             </td>             <td class="code">               <div class="highlight"><pre>      hsb1 = <span class="property">@colorToHSB</span>(colorBits1)
      a1 = ((colorBits1 &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="property">@colorModeA</span>
      hsb2 = <span class="property">@colorToHSB</span>(colorBits2)
      a2 = ((colorBits2 &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="property">@colorModeA</span>
      
</pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>RColourFunctions.eturn lerp value for each channel, for HSB components</p>             </td>             <td class="code">               <div class="highlight"><pre>      h = <span class="property">@lerp</span>(hsb1[<span class="number">0</span>], hsb2[<span class="number">0</span>], amt)
      s = <span class="property">@lerp</span>(hsb1[<span class="number">1</span>], hsb2[<span class="number">1</span>], amt)
      b = <span class="property">@lerp</span>(hsb1[<span class="number">2</span>], hsb2[<span class="number">2</span>], amt)
      rgb = <span class="property">@color</span>.toRGB(h, s, b)
      
</pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>... and for Alpha-range</p>             </td>             <td class="code">               <div class="highlight"><pre>      a = <span class="property">@lerp</span>(a1, a2, amt) * <span class="property">@colorModeA</span>
      <span class="keyword">return</span> (a &lt;&lt; <span class="number">24</span>) &amp; <span class="property">@Constants</span>.ALPHA_MASK | (rgb[<span class="number">0</span>] &lt;&lt; <span class="number">16</span>) &amp; <span class="property">@Constants</span>.RED_MASK | (rgb[<span class="number">1</span>] &lt;&lt; <span class="number">8</span>) &amp; <span class="property">@Constants</span>.GREEN_MASK | rgb[<span class="number">2</span>] &amp; <span class="property">@Constants</span>.BLUE_MASK
    
</pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Get RGBA values for Color 1 to floats</p>             </td>             <td class="code">               <div class="highlight"><pre>    r1 = (colorBits1 &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>
    g1 = (colorBits1 &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>
    b1 = (colorBits1 &amp; <span class="property">@Constants</span>.BLUE_MASK)
    a1 = ((colorBits1 &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="property">@colorModeA</span>
    
</pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Get RGBA values for Color 2 to floats</p>             </td>             <td class="code">               <div class="highlight"><pre>    r2 = (colorBits2 &amp; <span class="property">@Constants</span>.RED_MASK) &gt;&gt;&gt; <span class="number">16</span>
    g2 = (colorBits2 &amp; <span class="property">@Constants</span>.GREEN_MASK) &gt;&gt;&gt; <span class="number">8</span>
    b2 = (colorBits2 &amp; <span class="property">@Constants</span>.BLUE_MASK)
    a2 = ((colorBits2 &amp; <span class="property">@Constants</span>.ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) / <span class="property">@colorModeA</span>
    
</pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Return lerp value for each channel, INT for color, Float for Alpha-range</p>             </td>             <td class="code">               <div class="highlight"><pre>    r = <span class="property">@lerp</span>(r1, r2, amt) | <span class="number">0</span>
    g = <span class="property">@lerp</span>(g1, g2, amt) | <span class="number">0</span>
    b = <span class="property">@lerp</span>(b1, b2, amt) | <span class="number">0</span>
    a = <span class="property">@lerp</span>(a1, a2, amt) * <span class="property">@colorModeA</span>
    (a &lt;&lt; <span class="number">24</span>) &amp; <span class="property">@Constants</span>.ALPHA_MASK | (r &lt;&lt; <span class="number">16</span>) &amp; <span class="property">@Constants</span>.RED_MASK | (g &lt;&lt; <span class="number">8</span>) &amp; <span class="property">@Constants</span>.GREEN_MASK | b &amp; <span class="property">@Constants</span>.BLUE_MASK

  
  
  Changes the way Processing interprets color data. By <span class="reserved">default</span>, fill(), stroke(), <span class="keyword">and</span> background()
  colors are set <span class="keyword">by</span> values between <span class="number">0</span> <span class="keyword">and</span> <span class="number">255</span> using the RGB color model. It <span class="keyword">is</span> possible to change the
  numerical range used <span class="keyword">for</span> specifying colors <span class="keyword">and</span> to <span class="keyword">switch</span> color systems. For example, calling colorMode(RGB, <span class="number">1.0</span>)
  will specify that values are specified between <span class="number">0</span> <span class="keyword">and</span> <span class="number">1.</span> The limits <span class="keyword">for</span> defining colors are altered <span class="keyword">by</span> setting the
  parameters range1, range2, range3, <span class="keyword">and</span> range <span class="number">4.</span>
  
  <span class="property">@param</span> {MODE} mode Either RGB <span class="keyword">or</span> HSB, corresponding to Red<span class="regexp">/Green/Blue and Hue/Saturation/</span>Brightness
  <span class="property">@param</span> {int|float} range              range <span class="keyword">for</span> all color elements
  <span class="property">@param</span> {int|float} range1             range <span class="keyword">for</span> the red <span class="keyword">or</span> hue depending <span class="literal">on</span> the current color mode
  <span class="property">@param</span> {int|float} range2             range <span class="keyword">for</span> the green <span class="keyword">or</span> saturation depending <span class="literal">on</span> the current color mode
  <span class="property">@param</span> {int|float} range3             range <span class="keyword">for</span> the blue <span class="keyword">or</span> brightness depending <span class="literal">on</span> the current color mode
  <span class="property">@param</span> {int|float} range4             range <span class="keyword">for</span> the alpha
  
  <span class="property">@returns</span> none
  
  <span class="property">@see</span> background
  <span class="property">@see</span> fill
  <span class="property">@see</span> stroke
  
  colorMode: (mode, range1, range2, range3, range4) -&gt;
    <span class="property">@curColorMode</span> = mode
    <span class="keyword">if</span> arguments.length &gt; <span class="number">1</span>
      <span class="property">@colorModeX</span> = range1
      <span class="property">@colorModeY</span> = range2 <span class="keyword">or</span> range1
      <span class="property">@colorModeZ</span> = range3 <span class="keyword">or</span> range1
      <span class="property">@colorModeA</span> = range4 <span class="keyword">or</span> range1

  
</pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>blending modes</p>             </td>             <td class="code">               <div class="highlight"><pre>  
  These are internal blending modes used <span class="keyword">for</span> BlendColor()
  
  <span class="property">@param</span> {Color} c1       First Color to blend
  <span class="property">@param</span> {Color} c2       Second Color to blend
  
  <span class="property">@returns</span> {Color}        The blended Color
  
  <span class="property">@see</span> BlendColor
  <span class="property">@see</span> Blend
  
  modesFunction: () -&gt;
    ALPHA_MASK = <span class="property">@Constants</span>.ALPHA_MASK
    RED_MASK = <span class="property">@Constants</span>.RED_MASK
    GREEN_MASK = <span class="property">@Constants</span>.GREEN_MASK
    BLUE_MASK = <span class="property">@Constants</span>.BLUE_MASK
    min = Math.min
    max = Math.max
    applyMode = <span class="literal">undefined</span>
    <span class="function"><span class="title">applyMode</span></span> = (c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb) -&gt;
      a = <span class="literal">undefined</span>
      r = <span class="literal">undefined</span>
      g = <span class="literal">undefined</span>
      b = <span class="literal">undefined</span>
      a = min(((c1 &amp; <span class="number">0xff000000</span>) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span>
      r = (ar + (((cr - ar) * f) &gt;&gt; <span class="number">8</span>))
      r = ((<span class="keyword">if</span> (r &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (r &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> r)))) &lt;&lt; <span class="number">16</span>
      g = (ag + (((cg - ag) * f) &gt;&gt; <span class="number">8</span>))
      g = ((<span class="keyword">if</span> (g &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (g &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> g)))) &lt;&lt; <span class="number">8</span>
      b = ab + (((cb - ab) * f) &gt;&gt; <span class="number">8</span>)
      b = (<span class="keyword">if</span> (b &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (b &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> b)))
      a | r | g | b

    <span class="function"><span class="title">replace</span></span> = (c1, c2) -&gt;
      c2

    <span class="function"><span class="title">blend</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK)
      ag = (c1 &amp; GREEN_MASK)
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK)
      bg = (c2 &amp; GREEN_MASK)
      bb = (c2 &amp; BLUE_MASK)
      min(((c1 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span> | (ar + (((br - ar) * f) &gt;&gt; <span class="number">8</span>)) &amp; RED_MASK | (ag + (((bg - ag) * f) &gt;&gt; <span class="number">8</span>)) &amp; GREEN_MASK | (ab + (((bb - ab) * f) &gt;&gt; <span class="number">8</span>)) &amp; BLUE_MASK

    <span class="function"><span class="title">add</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      min(((c1 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span> | min(((c1 &amp; RED_MASK) + ((c2 &amp; RED_MASK) &gt;&gt; <span class="number">8</span>) * f), RED_MASK) &amp; RED_MASK | min(((c1 &amp; GREEN_MASK) + ((c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>) * f), GREEN_MASK) &amp; GREEN_MASK | min((c1 &amp; BLUE_MASK) + (((c2 &amp; BLUE_MASK) * f) &gt;&gt; <span class="number">8</span>), BLUE_MASK)

    <span class="function"><span class="title">subtract</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      min(((c1 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span> | max(((c1 &amp; RED_MASK) - ((c2 &amp; RED_MASK) &gt;&gt; <span class="number">8</span>) * f), GREEN_MASK) &amp; RED_MASK | max(((c1 &amp; GREEN_MASK) - ((c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>) * f), BLUE_MASK) &amp; GREEN_MASK | max((c1 &amp; BLUE_MASK) - (((c2 &amp; BLUE_MASK) * f) &gt;&gt; <span class="number">8</span>), <span class="number">0</span>)

    <span class="function"><span class="title">lightest</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      min(((c1 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span> | max(c1 &amp; RED_MASK, ((c2 &amp; RED_MASK) &gt;&gt; <span class="number">8</span>) * f) &amp; RED_MASK | max(c1 &amp; GREEN_MASK, ((c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>) * f) &amp; GREEN_MASK | max(c1 &amp; BLUE_MASK, ((c2 &amp; BLUE_MASK) * f) &gt;&gt; <span class="number">8</span>)

    <span class="function"><span class="title">darkest</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK)
      ag = (c1 &amp; GREEN_MASK)
      ab = (c1 &amp; BLUE_MASK)
      br = min(c1 &amp; RED_MASK, ((c2 &amp; RED_MASK) &gt;&gt; <span class="number">8</span>) * f)
      bg = min(c1 &amp; GREEN_MASK, ((c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>) * f)
      bb = min(c1 &amp; BLUE_MASK, ((c2 &amp; BLUE_MASK) * f) &gt;&gt; <span class="number">8</span>)
      min(((c1 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>) + f, <span class="number">0xff</span>) &lt;&lt; <span class="number">24</span> | (ar + (((br - ar) * f) &gt;&gt; <span class="number">8</span>)) &amp; RED_MASK | (ag + (((bg - ag) * f) &gt;&gt; <span class="number">8</span>)) &amp; GREEN_MASK | (ab + (((bb - ab) * f) &gt;&gt; <span class="number">8</span>)) &amp; BLUE_MASK

    <span class="function"><span class="title">difference</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = (<span class="keyword">if</span> (ar &gt; br) <span class="keyword">then</span> (ar - br) <span class="keyword">else</span> (br - ar))
      cg = (<span class="keyword">if</span> (ag &gt; bg) <span class="keyword">then</span> (ag - bg) <span class="keyword">else</span> (bg - ag))
      cb = (<span class="keyword">if</span> (ab &gt; bb) <span class="keyword">then</span> (ab - bb) <span class="keyword">else</span> (bb - ab))
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">exclusion</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = ar + br - ((ar * br) &gt;&gt; <span class="number">7</span>)
      cg = ag + bg - ((ag * bg) &gt;&gt; <span class="number">7</span>)
      cb = ab + bb - ((ab * bb) &gt;&gt; <span class="number">7</span>)
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">multiply</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = (ar * br) &gt;&gt; <span class="number">8</span>
      cg = (ag * bg) &gt;&gt; <span class="number">8</span>
      cb = (ab * bb) &gt;&gt; <span class="number">8</span>
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">screen</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = <span class="number">255</span> - (((<span class="number">255</span> - ar) * (<span class="number">255</span> - br)) &gt;&gt; <span class="number">8</span>)
      cg = <span class="number">255</span> - (((<span class="number">255</span> - ag) * (<span class="number">255</span> - bg)) &gt;&gt; <span class="number">8</span>)
      cb = <span class="number">255</span> - (((<span class="number">255</span> - ab) * (<span class="number">255</span> - bb)) &gt;&gt; <span class="number">8</span>)
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">hard_light</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = (<span class="keyword">if</span> (br &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ar * br) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ar) * (<span class="number">255</span> - br)) &gt;&gt; <span class="number">7</span>)))
      cg = (<span class="keyword">if</span> (bg &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ag * bg) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ag) * (<span class="number">255</span> - bg)) &gt;&gt; <span class="number">7</span>)))
      cb = (<span class="keyword">if</span> (bb &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ab * bb) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ab) * (<span class="number">255</span> - bb)) &gt;&gt; <span class="number">7</span>)))
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">soft_light</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = ((ar * br) &gt;&gt; <span class="number">7</span>) + ((ar * ar) &gt;&gt; <span class="number">8</span>) - ((ar * ar * br) &gt;&gt; <span class="number">15</span>)
      cg = ((ag * bg) &gt;&gt; <span class="number">7</span>) + ((ag * ag) &gt;&gt; <span class="number">8</span>) - ((ag * ag * bg) &gt;&gt; <span class="number">15</span>)
      cb = ((ab * bb) &gt;&gt; <span class="number">7</span>) + ((ab * ab) &gt;&gt; <span class="number">8</span>) - ((ab * ab * bb) &gt;&gt; <span class="number">15</span>)
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">overlay</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = (<span class="keyword">if</span> (ar &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ar * br) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ar) * (<span class="number">255</span> - br)) &gt;&gt; <span class="number">7</span>)))
      cg = (<span class="keyword">if</span> (ag &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ag * bg) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ag) * (<span class="number">255</span> - bg)) &gt;&gt; <span class="number">7</span>)))
      cb = (<span class="keyword">if</span> (ab &lt; <span class="number">128</span>) <span class="keyword">then</span> ((ab * bb) &gt;&gt; <span class="number">7</span>) <span class="keyword">else</span> (<span class="number">255</span> - (((<span class="number">255</span> - ab) * (<span class="number">255</span> - bb)) &gt;&gt; <span class="number">7</span>)))
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">dodge</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = <span class="literal">undefined</span>
      cg = <span class="literal">undefined</span>
      cb = <span class="literal">undefined</span>
      cr = <span class="number">255</span>
      <span class="keyword">if</span> br <span class="keyword">isnt</span> <span class="number">255</span>
        cr = (ar &lt;&lt; <span class="number">8</span>) / (<span class="number">255</span> - br)
        cr = (<span class="keyword">if</span> (cr &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cr &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cr)))
      cg = <span class="number">255</span>
      <span class="keyword">if</span> bg <span class="keyword">isnt</span> <span class="number">255</span>
        cg = (ag &lt;&lt; <span class="number">8</span>) / (<span class="number">255</span> - bg)
        cg = (<span class="keyword">if</span> (cg &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cg &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cg)))
      cb = <span class="number">255</span>
      <span class="keyword">if</span> bb <span class="keyword">isnt</span> <span class="number">255</span>
        cb = (ab &lt;&lt; <span class="number">8</span>) / (<span class="number">255</span> - bb)
        cb = (<span class="keyword">if</span> (cb &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cb &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cb)))
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb

    <span class="function"><span class="title">burn</span></span> = (c1, c2) -&gt;
      f = (c2 &amp; ALPHA_MASK) &gt;&gt;&gt; <span class="number">24</span>
      ar = (c1 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      ag = (c1 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      ab = (c1 &amp; BLUE_MASK)
      br = (c2 &amp; RED_MASK) &gt;&gt; <span class="number">16</span>
      bg = (c2 &amp; GREEN_MASK) &gt;&gt; <span class="number">8</span>
      bb = (c2 &amp; BLUE_MASK)
      cr = <span class="literal">undefined</span>
      cg = <span class="literal">undefined</span>
      cb = <span class="literal">undefined</span>
      cr = <span class="number">0</span>
      <span class="keyword">if</span> br <span class="keyword">isnt</span> <span class="number">0</span>
        cr = ((<span class="number">255</span> - ar) &lt;&lt; <span class="number">8</span>) / br
        cr = <span class="number">255</span> - ((<span class="keyword">if</span> (cr &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cr &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cr))))
      cg = <span class="number">0</span>
      <span class="keyword">if</span> bg <span class="keyword">isnt</span> <span class="number">0</span>
        cg = ((<span class="number">255</span> - ag) &lt;&lt; <span class="number">8</span>) / bg
        cg = <span class="number">255</span> - ((<span class="keyword">if</span> (cg &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cg &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cg))))
      cb = <span class="number">0</span>
      <span class="keyword">if</span> bb <span class="keyword">isnt</span> <span class="number">0</span>
        cb = ((<span class="number">255</span> - ab) &lt;&lt; <span class="number">8</span>) / bb
        cb = <span class="number">255</span> - ((<span class="keyword">if</span> (cb &lt; <span class="number">0</span>) <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> ((<span class="keyword">if</span> (cb &gt; <span class="number">255</span>) <span class="keyword">then</span> <span class="number">255</span> <span class="keyword">else</span> cb))))
      applyMode c1, f, ar, ag, ab, br, bg, bb, cr, cg, cb
  
  
  Blends two color values together based <span class="literal">on</span> the blending mode given as the MODE parameter.
  The possible modes are described <span class="keyword">in</span> the reference <span class="keyword">for</span> the blend() <span class="reserved">function</span>.
  
  <span class="property">@param</span> {color} c1 color: the first color to blend
  <span class="property">@param</span> {color} c2 color: the second color to blend
  <span class="property">@param</span> {MODE} MODE Either BLEND, ADD, SUBTRACT, DARKEST, LIGHTEST, DIFFERENCE, EXCLUSION, MULTIPLY,
  SCREEN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, <span class="keyword">or</span> BURN
  
  <span class="property">@returns</span> {float} The blended color.
  
  <span class="property">@see</span> blend
  <span class="property">@see</span> color
  
  blendColor: (c1, c2, mode) -&gt;
    <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.REPLACE
      <span class="property">@modes</span>.replace c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.BLEND
      <span class="property">@modes</span>.blend c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.ADD
      <span class="property">@modes</span>.add c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.SUBTRACT
      <span class="property">@modes</span>.subtract c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.LIGHTEST
      <span class="property">@modes</span>.lightest c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.DARKEST
      <span class="property">@modes</span>.darkest c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.DIFFERENCE
      <span class="property">@modes</span>.difference c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.EXCLUSION
      <span class="property">@modes</span>.exclusion c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.MULTIPLY
      <span class="property">@modes</span>.multiply c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.SCREEN
      <span class="property">@modes</span>.screen c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.HARD_LIGHT
      <span class="property">@modes</span>.hard_light c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.SOFT_LIGHT
      <span class="property">@modes</span>.soft_light c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.OVERLAY
      <span class="property">@modes</span>.overlay c1, c2
    <span class="keyword">else</span> <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.DODGE
      <span class="property">@modes</span>.dodge c1, c2
    <span class="keyword">else</span> <span class="property">@modes</span>.burn c1, c2  <span class="keyword">if</span> mode <span class="keyword">is</span> <span class="property">@Constants</span>.BURN


</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 